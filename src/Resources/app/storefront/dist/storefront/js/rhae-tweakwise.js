"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["rhae-tweakwise"],{2684:(t,e,a)=>{var n=a(6285),r=a(9068),i=a(1966),d=a(207);class s extends n.Z{init(){this._registerEvents()}_registerEvents(){const t=this._addToCart.bind(this);window.addEventListener("twAddToCart",t)}_addToCart(t){let e=t.detail.data.attributes.find((t=>"product_id"===t.name));void 0===e&&alert("An error occurred");const a=e.values[0];let n=document.createElement("form");n.dataset.addToCart="true",n.setAttribute("action",t.detail.addToCartAction),n.setAttribute("method","post"),n.setAttribute("id","twn-add-to-cart-form"),n.setAttribute("data-add-to-cart","true");let r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","redirectTo"),r.setAttribute("value","frontend.cart.offcanvas");let i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","redirectParameters"),i.dataset.redirectParameters="true",i.setAttribute("value",'{"productId": "'+a+'"}');let s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","lineItems["+a+"][id]"),s.setAttribute("value",a);let u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name","lineItems["+a+"][referencedId]"),u.setAttribute("value",a);let l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","lineItems["+a+"][type]"),l.setAttribute("value","product");let o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","lineItems["+a+"][stackable]"),o.setAttribute("value","1");let p=document.createElement("input");p.setAttribute("type","hidden"),p.setAttribute("name","lineItems["+a+"][removable]"),p.setAttribute("value","1");let c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","lineItems["+a+"][quantity]"),c.setAttribute("value","1");let m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name","_csrf_token"),m.setAttribute("value",t.detail.csrfToken),n.appendChild(r),n.appendChild(i),n.appendChild(s),n.appendChild(u),n.appendChild(l),n.appendChild(o),n.appendChild(p),n.appendChild(c),n.appendChild(m);const b=t.detail.addToCartAction,A=d.Z.serialize(n);this.$emitter.publish("beforeFormSubmit",A),this._openOffCanvasCarts(b,A)}_openOffCanvasCarts(t,e){const a=r.Z.getPluginInstances("OffCanvasCart");i.Z.iterate(a,(a=>this._openOffCanvasCart(a,t,e)))}_openOffCanvasCart(t,e,a){t.openOffCanvas(e,a,(()=>{this.$emitter.publish("openOffCanvasCart")}))}}window.PluginManager.register("TwAddToCartPlugin",s)}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=2684,t(t.s=e);var e}));t.O()}]);